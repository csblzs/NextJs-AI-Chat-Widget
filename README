ğŸ¤– AiChat
ğŸ—‚ï¸ Structure

The repository is split into two main parts: a backend API and a frontend widget.

.
â”œâ”€â”€ backend-rag-api/      # API routes, document indexing, RAG logic
â””â”€â”€ frontend-widget/     # Embeddable chat UI (Next.js)

âš™ï¸ Prerequisites

Before getting started, make sure the following tools are available:

Docker + Docker Compose (recommended for easiest setup)

Node.js 20+ (required for local development)

Linux build tools (build-essential, python3, etc.)
Required for compiling the native hnswlib-node dependency

ğŸ” Configuration (.env)

Environment variables are required for the backend and optional for the frontend.

Required (backend)
GEMINI_API_KEY=your_api_key_here

Required only if you use the RAG endpoint (/api/rag)
COHERE_API_KEY=your_api_key_here

Optional (frontend)
NEXT_PUBLIC_BASE_URL=http://localhost:3000


âš ï¸ Security note
Never commit real API keys to a public repository.
Use a local .env file and commit an .env.example template instead.

ğŸš€ Quickstart (Docker)
1ï¸âƒ£ Start the backend service
cd backend-rag-api
docker compose up --build


This builds the container and starts the API server.

2ï¸âƒ£ Index the documents
docker exec -it rag_api npm run load-data


â— Important
Document-based retrieval will only work after indexing has completed.

ğŸ§‘â€ğŸ’» Local development
Backend

Install dependencies and start the development server:

cd backend-rag-api
npm install
npm run dev


Run indexing locally:

npm run load-data

Frontend widget
cd frontend-widget
npm install
npm run dev


The widget can then be embedded or tested locally.

ğŸ”Œ API endpoints

Base URL: http://localhost:3000

ğŸ’¬ Chat (LLM response)

POST /api/chat

curl -s http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"question":"Hello"}'


Returns a direct LLM response without document retrieval.

ğŸ“š RAG (document-aware response)

POST /api/rag

curl -s http://localhost:3000/api/rag \
  -H "Content-Type: application/json" \
  -d '{"question":"What is described in the documentation?"}'


Uses indexed documents to generate grounded, context-aware answers.

ğŸ› ï¸ Troubleshooting

Common issues and their solutions:

CORS errors
Verify NEXT_PUBLIC_BASE_URL and backend CORS configuration.

Missing index
Make sure npm run load-data has been executed before calling /api/rag.

Native build errors (hnswlib-node)
Ensure Linux build tools (build-essential, python3, etc.) are installed.

Missing environment variables
GEMINI_API_KEY is required; /api/rag also requires COHERE_API_KEY.
